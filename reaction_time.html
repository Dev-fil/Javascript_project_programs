<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reaction Time</title>
</head>

<body>

    <script>
        let status = 0
        function homePage(){
            let div = document.createElement('div')
            div.textContent = 'Click on the button when color of screen changes'
            div.setAttribute('style', 'font-size: xx-large; font-weight: 900; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif; color: blue')
            document.body.appendChild(div)
            let btn = document.createElement('button')
            btn.textContent = 'Ready'
            document.body.appendChild(btn)
            btn.addEventListener('click', start)
        }
        homePage()
        function changeColor() {
            let x = Math.floor(Math.random() * 256)
            let y = Math.floor(Math.random() * 256)
            let z = Math.floor(Math.random() * 256)
            let color = `rgb(${x},${y},${z})`
            document.body.style.background = color
            date = Date.now()
            calculate()
            status = 1
        }

        function start() {
            var rand = Math.round(Math.random() * 9000 - 5000) + 5000;
            document.body.innerHTML = ''
            bt = document.createElement('button')
            bt.innerHTML = 'Click';
            bt.setAttribute('style', 'font-size : 100px')
            bt.addEventListener('click', ()=>{
                if(document.body.style.background == '') {alert('Game Over')
                bt.disabled = true}
            })
            document.body.appendChild(bt)
            setTimeout(changeColor, rand)
        }

        function calculateTime() {
            bt.addEventListener('click', ()=>{
                    console.log('btn clicked')
                let date1 = Date.now()
                time = date1 - date
                let div = document.createElement('div')
                let p1 = document.createElement('p')
                p1.textContent = 'Your Reaction time is ' + time + ' ms';
                p1.setAttribute('style', 'font-size: larger; font-weight: 600; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif; color: red')
                div.appendChild(p1)
                document.body.appendChild(div)
                bt.disabled = true
                let startNew = document.createElement('button')
                startNew.innerHTML = 'New Game'
                document.body.appendChild(startNew)
                startNew.addEventListener('click', clear)
                startNew.addEventListener('click', homePage)
            })
        }

        function calculate(){
            calculateTime()
        }

        function clear(){
            document.body.innerHTML = ''
            document.body.style.background = 'white'
        }

    </script>
</body>

</html>